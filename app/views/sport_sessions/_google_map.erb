<% if session.latitude and session.longitude %>
    <script>
        var map;
        var map_center;
        function initialize() {
            map_center = new google.maps.LatLng(<%= session.latitude %>, <%= session.longitude %>);
            var mapOptions = {
                zoom: 12,
                center: map_center,
                zoomControl: true,
                scaleControl: true,
                panControl: true
            };
            map = new google.maps.Map(document.getElementById('map-canvas'),
                    mapOptions);
            var marker = new google.maps.Marker({
                position: map_center,
                map: map
            });
        }
        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
<% end %>