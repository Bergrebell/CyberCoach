<h1>Friends</h1>

<div class="uk-grid">

  <!-- Friends -->
  <div class="uk-width-medium-2-3">

    <% if @requests_received.count > 0 %>
        <div class="uk-panel uk-panel-box uk-panel-header uk-panel-box-primary">
          <h3 class="uk-title">New Friend Requests</h3>
          <% @requests_received.each do |user| %>

              <%= form_for Friendship.new, url: friends_confirm_url, method: :post do |f| %>
                  <%= f.hidden_field :friend_id, value: user.id %>
                  <%= f.hidden_field :username, value: user.username %>
                  <td> <%= user.username %> </td>
                  <td> <%= f.button 'Confirm', class: 'uk-button' %> </td>
              <% end %>

          <% end %>
        </div>
    <% end %>

    <div class="uk-panel uk-panel-box uk-panel-header uk-panel-box-secondary">
      <h3 class="uk-title">My Friends</h3>
      <table class="uk-table">
        <tr>
          <th>Username</th>
          <th>Common Sessions</th>
          <th>Actions</th>
        </tr>
        <% @friends.each do |user| %>
            <tr>
              <td><%= user.username %></td>
              <td>TODO</td>
              <td><a class="uk-button uk-button-small">View sessions</a></td>
            </tr>
        <% end %>
      </table>
    </div>
  </div>

  <!-- Suggestions -->
  <div class="uk-width-medium-1-3">
    <div class="uk-panel uk-panel-box uk-panel-header uk-panel-box-secondary">
      <h3 class="uk-title">Suggestions</h3>
      <table class="uk-table">
        <% @proposals.each do |user| %>
            <tr>

              <%= form_for Friendship.new, url: friends_create_url, method: :post do |f| %>
                  <%= f.hidden_field :friend_id, value: user.id %>
                  <%= f.hidden_field :username, value: user.username %>
                  <td> <%= user.username %> </td>
                  <td> <%= f.button 'Send request', class: 'uk-button uk-button-small' %> </td>
              <% end %>

            </tr>
        <% end %>

      </table>
    </div>
  </div>
</div>